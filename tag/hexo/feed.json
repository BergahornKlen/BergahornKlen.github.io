{
    "version": "https://jsonfeed.org/version/1",
    "title": "Sycamore's Blog • All posts by \"hexo\" tag",
    "description": "",
    "home_page_url": "https://www.sycamore.top",
    "items": [
        {
            "id": "https://www.sycamore.top/Develop/shokaX/hexo-shokaX%E4%B8%BB%E9%A2%98%E4%BF%AE%E6%94%B9/",
            "url": "https://www.sycamore.top/Develop/shokaX/hexo-shokaX%E4%B8%BB%E9%A2%98%E4%BF%AE%E6%94%B9/",
            "title": "hexo-shokaX主题修改",
            "date_published": "2023-04-30T06:05:53.000Z",
            "content_html": "<p><span class=\"label\">shokaX</span> 主题基于<span class=\"label\"> shoka</span> 主题进行二次开发，据说是因为原主题停止更新...</p>\n<p>因为各种原因吧，若按照 <code>shokaX</code>  作者写的文档更改配置的话，还需要一定程度上参考一下 <code>shoka</code>  主题的配置文档，</p>\n<p>所以，我决定记录一下这次博客迁移中对 <code>shokaX</code>  主题进行的更改。</p>\n<h1 id=\"主题安装\"><a class=\"anchor\" href=\"#主题安装\">#</a> 主题安装</h1>\n<p><code>shokaX</code>  主题配置文档中，使用主题作者自己搭的工具 <code>SXC</code>  进行安装，</p>\n<div class=\"note info\">\n<p>注意：因为自定义内容较多，所以选择从 <code>github</code>  安装。</p>\n</div>\n<p><figure class=\"highlight shell\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\">hexo init</span></span><br><span class=\"line\">npm install shokax-cli --location=global</span><br><span class=\"line\"><span class=\"meta prompt_\"># </span><span class=\"language-bash\"><span class=\"built_in\">cd</span> your_blog</span></span><br><span class=\"line\">SXC install -r=github shokaX</span><br></pre></td></tr></table></figure></p>\n<h1 id=\"主题修改\"><a class=\"anchor\" href=\"#主题修改\">#</a> 主题修改</h1>\n<h2 id=\"值得一说的基础配置\"><a class=\"anchor\" href=\"#值得一说的基础配置\">#</a> 值得一说的基础配置</h2>\n<h3 id=\"顶栏\"><a class=\"anchor\" href=\"#顶栏\">#</a> 顶栏</h3>\n<p>如果想和 <code>shoka</code>  主题站点的顶栏配置一样的，可以参考我的配置：</p>\n<p><span class=\"spoiler\" title=\"你知道得太多了\">shokaX 配置文档中说得也够详细了，但某些话读起来总有点谜语人的感觉，比如超链接的部分，文档的说法实在是令人迷惑...</span></p>\n<p><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">menu:</span></span><br><span class=\"line\">  <span class=\"attr\">home:</span> <span class=\"string\">/</span> <span class=\"string\">||</span> <span class=\"string\">home</span></span><br><span class=\"line\">  <span class=\"attr\">about:</span></span><br><span class=\"line\">    <span class=\"attr\">default:</span> <span class=\"string\">/about/</span> <span class=\"string\">||</span> <span class=\"string\">user</span></span><br><span class=\"line\">    <span class=\"attr\">aboutsite:</span> <span class=\"string\">/about/</span> <span class=\"string\">||</span> <span class=\"string\">cloud</span></span><br><span class=\"line\">  <span class=\"attr\">posts:</span></span><br><span class=\"line\">    <span class=\"attr\">default:</span> <span class=\"string\">/</span> <span class=\"string\">||</span> <span class=\"string\">feather</span></span><br><span class=\"line\">    <span class=\"attr\">archives:</span> <span class=\"string\">/archives/</span> <span class=\"string\">||</span> <span class=\"string\">list-alt</span></span><br><span class=\"line\">    <span class=\"attr\">categories:</span> <span class=\"string\">/categories/</span> <span class=\"string\">||</span> <span class=\"string\">th</span></span><br><span class=\"line\">    <span class=\"attr\">tags:</span> <span class=\"string\">/tags/</span> <span class=\"string\">||</span> <span class=\"string\">tags</span></span><br><span class=\"line\">  <span class=\"attr\">friends:</span> <span class=\"string\">/friends/</span> <span class=\"string\">||</span> <span class=\"string\">heart</span></span><br><span class=\"line\">  <span class=\"attr\">travellings:</span> <span class=\"string\">https://www.travellings.cn/go.html</span>  <span class=\"string\">||</span> <span class=\"string\">subway</span></span><br></pre></td></tr></table></figure></p>\n<div class=\"note default\">\n<p>关于自定义 icon 的添加， <code>shoka</code>  的配置文档中有提供一种解决方法，但建议参考我后面的解决方案 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9zeWNhbW9yZS50b3AvJUU1JThEJTlBJUU1JUFFJUEyJUU0JUI4JUJCJUU5JUEyJTk4L2hleG8tc2hva2FYJUU0JUI4JUJCJUU5JUEyJTk4JUU0JUJGJUFFJUU2JTk0JUI5LyNpY29uZm9udCVFNSU5QiVCRSVFNiVBMCU4NyVFNSVCQSU5MyVFNiVCNyVCQiVFNSU4QSVBMA==\">[这里]</span></p>\n</div>\n<h3 id=\"评论系统\"><a class=\"anchor\" href=\"#评论系统\">#</a> 评论系统</h3>\n<p>因为 <code>minivaline</code>  停止维护且 <code>valine</code>  评论系统存在严重的安全问题， <code>shokaX</code>  推荐使用 <code>valine</code>  系其他评论系统代替。</p>\n<p>这里提供我的 <code>waline</code>  的配置方案（只放了与 <code>shokaX</code>  配置文档中不一样的部分）：</p>\n<p><figure class=\"highlight yaml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">waline:</span></span><br><span class=\"line\">  <span class=\"attr\">enable:</span> <span class=\"literal\">true</span></span><br><span class=\"line\">  <span class=\"attr\">serverURL:</span> <span class=\"string\">&quot;https://vercel.sycamore.top&quot;</span></span><br><span class=\"line\">  <span class=\"attr\">locale:</span> &#123;</span><br><span class=\"line\">      <span class=\"attr\">placeholder:</span> <span class=\"string\">&quot;1. 提问前请先仔细阅读本文档⚡\\n2. 页面显示问题💥，请提供控制台截图📸或者您的测试网址\\n3. 其他任何报错💣，请提供详细描述和截图📸，祝食用愉快💪&quot;</span></span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></p>\n<div class=\"note default\">\n<p>其中， <code>serverURL</code>  按照 <code>waline</code>  官方文档绑定了域名， <code>local.placeholder</code>  为评论框中默认显示的文字</p>\n</div>\n<p>placeholder 与 valine 系统配置不同，我是在 waline 官方文档 <span class=\"exturl\" data-url=\"aHR0cHM6Ly93YWxpbmUuanMub3JnL21pZ3JhdGlvbi92YWxpbmUuaHRtbA==\">从 Valine 迁移</span> 中找到的</p>\n<h3 id=\"搜索系统\"><a class=\"anchor\" href=\"#搜索系统\">#</a> 搜索系统</h3>\n<p><code>algolia</code>  必须参考官方文档进行配置，需要<strong>注意</strong>的是：</p>\n<ol>\n<li><code>algolia</code>  的配置应该是在 <code>_config.yml</code>  文件中的，我也不知道为啥要在 <code>config</code>  里：<br />\n<img data-src=\"https://res.cloudinary.com/sycamore/image/upload/v1682840599/Typera/2023/04/c825437e5c42bd869ff137173c375d20.png\" alt=\"image-20230430151055652\" /><br />\n 也许是一定得这样？</li>\n<li>记得要运行 <code>hexo algolia</code>  将数据更新到 index 中</li>\n</ol>\n<h3 id=\"默认图片更改\"><a class=\"anchor\" href=\"#默认图片更改\">#</a> 默认图片更改</h3>\n<p>博客根目录下创建 <code>source/_data/assets</code>  文件夹，要改哪张图，直接将你的图片名称更改为对应的即可。原图片在主题目录的 <code>source/assets</code>  文件夹下。</p>\n<p>比如你要替换 <code>favicon.ico</code>  文件（站点图标），就把你的图标文件重命名为 <code>favicon.ico</code> ，然后放到 <code>source/_data/assets</code>  文件夹下。</p>\n<hr />\n<div class=\"note info\">\n<p>基础的部分不再赘述，配置可参考<span class=\"exturl\" data-url=\"aHR0cHM6Ly9kb2NzLmthaXRha3UueHl6Lw==\"> shokaX</span> 和<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zaG9rYS5sb3N0eXUubWUvY29tcHV0ZXItc2NpZW5jZS9ub3RlL3RoZW1lLXNob2thLWRvYy8=\"> shoka</span> 主题的配置文档。</p>\n</div>\n<h2 id=\"主题文件的修改和配置\"><a class=\"anchor\" href=\"#主题文件的修改和配置\">#</a> 主题文件的修改和配置</h2>\n<h3 id=\"音乐播放器\"><a class=\"anchor\" href=\"#音乐播放器\">#</a> 音乐播放器</h3>\n<p>配置格式参考 <code>shoka</code>  的配置文档，记得改的链接必须是有效的、公开的歌单，</p>\n<p>有效指的是：歌单中至少有一首歌不是 VIP 专享、能播放。否则会加载默认歌单。</p>\n<p>此外，如果你的播放器根本加载不出来，请检查主题目录下的 <code>source/js/_app/player.js</code>  和 <code>player.ts</code> ，</p>\n<p>全局搜索 <code>meting</code>  应该就能看到（因为是基于 <span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2luamFob3cvbWV0aW5nLWFwaQ==\">meting-api</span> 这个项目的）</p>\n<p><img data-src=\"https://res.cloudinary.com/sycamore/image/upload/v1682841729/Typera/2023/04/f4f07901036b72746edf40bb804de698.png\" alt=\"image-20230430160205536\" /></p>\n<p>上图中的代码是经过更改的，原来有问题的地方是在： <code>/meting/api?server=</code> ，把 <code>api</code>  删掉就行了</p>\n<h3 id=\"tab标签favicon内容修改\"><a class=\"anchor\" href=\"#tab标签favicon内容修改\">#</a> TAB 标签 favicon 内容修改</h3>\n<p>shoka 主题下，离开和进入博客页面时，浏览器 TAB 标签的内容会做出更改，</p>\n<p>修改这些内容的方式是更改主题目录的 <code>language</code>  文件夹下的文件，以 <code>en.yml</code>  为例：</p>\n<p><img data-src=\"https://res.cloudinary.com/sycamore/image/upload/v1682843117/Typera/2023/04/d75d58621c39e3eec92653408e01f7fa.png\" alt=\"image-20230430162513720\" /></p>\n<p>修改这两行文字就行。</p>\n<h3 id=\"底部foot内容删改\"><a class=\"anchor\" href=\"#底部foot内容删改\">#</a> 底部 foot 内容删改</h3>\n<p>不是有意要删掉 <code>shokaX</code>  的链接，页脚再加上一行实在是有点丑陋，看在我写了这篇文章的份上就放过我吧  <code>&lt;(＿　＿)&gt;</code></p>\n<p>更改位置在主题目录下， <code>layout/_partials/footer.pug</code>  文件中</p>\n<p><code>pug</code>  文件还是简单易懂的，主要还是说一下增加的<span class=\"label success\">一言</span>功能：</p>\n<p>（API 链接来自 <span class=\"label primary\">hitokoto</span>）</p>\n<p>主要代码如下：</p>\n<p><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if theme.footer.sentences</span><br><span class=\"line\">    div(class=&quot;sentences-content&quot; id=&quot;sentences-content&quot;)</span><br><span class=\"line\">        = &#x27;一言...&#x27;</span><br><span class=\"line\">    div(class=&quot;sentences-from&quot; id=&quot;sentences-from&quot;)</span><br><span class=\"line\">        = &#x27;來源...&#x27;</span><br><span class=\"line\">    script(type=&quot;text/javascript&quot;).</span><br><span class=\"line\">        fetch(`https://v1.hitokoto.cn/`)</span><br><span class=\"line\">        .then(response =&gt; response.json())</span><br><span class=\"line\">        .then(data =&gt; &#123;</span><br><span class=\"line\">            var content = document.getElementById(&#x27;sentences-content&#x27;);</span><br><span class=\"line\">            content.innerText = data.hitokoto</span><br><span class=\"line\">            var from = document.getElementById(&#x27;sentences-from&#x27;);</span><br><span class=\"line\">            from.innerText = data.from + (data.from_who ? &#x27; · &#x27; + data.from_who : &#x27;&#x27;)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .catch(console.error)</span><br></pre></td></tr></table></figure></p>\n<p>简单来说就是加了两个 <code>div</code> ，一个是一眼主体，一个是来源，分别给上  <code>id</code></p>\n<p>然后添加一个 <code>script</code> ，脚本中 <code>fetch</code>   <code>hitokoto</code>  的 API 地址，然后根据 <code>id</code>  找到对应的块，并使用 <code>innerText</code>  覆盖内容。</p>\n<h3 id=\"iconfont图标库添加\"><a class=\"anchor\" href=\"#iconfont图标库添加\">#</a> iconfont 图标库添加</h3>\n<p><code>shoka</code>  原作者给的方法是评论留言，等他看到之后，把你的用户加到他的项目里。</p>\n<p>因为是只读权限，所以你可以任意复制项目里的 <code>icon</code> ，再添加到你自己的项目中使用，最后再把配置文件中的 <code>iconfont</code>  一项改为自己项目的就行。</p>\n<p>但是这要建立在作者看到你的评论留言的基础上，鉴于他现在已经停止更新了...</p>\n<p>所以建议按照我的方法直接改改主题文件更合适一点，而且我的方法也简单粗暴。</p>\n<ol>\n<li>\n<p>首先，先配好 <code>iconfont</code>  的项目设置： <code>FontClass/Symbol 前缀</code> 改为 <code>i-</code> ， <code>Font Family</code>  改为 <code>ic</code> ，<br />\n记得重新生成一下在线链接。</p>\n</li>\n<li>\n<p>然后回到 hexo 中，配置文件中的 <code>iconfont</code>  下面加一个 <code>iconfont_plus</code>  的配置，名字随意，看着改就行</p>\n</li>\n<li>\n<p>然后找到主题目录下的 <code>source/css/</code>  文件夹，创建一个叫做 <code>_iconfont_plus.styl</code>  的文件，文件的内容就是你的 <code>iconfont</code>  项目在线链接的最后部分：<br />\n<img data-src=\"https://res.cloudinary.com/sycamore/image/upload/v1682844808/Typera/2023/04/8cc09958217b38bce3b8f9affe55f60e.png\" alt=\"image-20230430165324891\" /></p>\n</li>\n<li>\n<p>找到主题目录下的 <code>scripts/generaters/config.js</code>  文件，如下位置添加一个 <code>'iconfont_plus'</code> ：<br />\n<img data-src=\"https://res.cloudinary.com/sycamore/image/upload/v1682844981/Typera/2023/04/338e079adcf6f44d6edfc2c6ae9b54d4.png\" alt=\"image-20230430165616689\" /><br />\n（加了这个之后，就可以在主题目录之外修改了，根目录下增加文件 <code>source/_data/iconfont_plus.styl</code> ，但<strong>也可以不加</strong>)</p>\n</li>\n<li>\n<p>找到主题目录下的 <code>source/css/_variables.styl</code>  文件，增加：<br />\n<img data-src=\"https://res.cloudinary.com/sycamore/image/upload/v1682845300/Typera/2023/04/0c5218d4823d0c93f8b4d04589599140.png\" alt=\"image-20230430170136594\" /></p>\n</li>\n<li>\n<p>接下来修改同文件夹下的 <code>app.styl</code>  文件，这一步将 <code>iconfont</code>  项目的 <code>css</code>  文件 <code>import</code>  进了主文件<br />\n添加代码：</p>\n<p><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">if $_iconfont_plus = hexo-config(&#x27;style<span class=\"selector-class\">.iconfont_plus</span>&#x27;)</span><br><span class=\"line\">  <span class=\"keyword\">@import</span> $_iconfont_plus;</span><br><span class=\"line\">else</span><br><span class=\"line\">  <span class=\"keyword\">@import</span> <span class=\"string\">&quot;_iconfont_plus&quot;</span>;</span><br></pre></td></tr></table></figure></p>\n</li>\n<li>\n<p>最后修改 <code>source/css/_common/scaffolding/base.styl</code>  文件中，</p>\n<p>添加代码：</p>\n<p><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@font-face</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: <span class=\"string\">&#x27;ic&#x27;</span>;</span><br><span class=\"line\">  <span class=\"attribute\">src</span>: <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;//at.alicdn.com/t/c/font_&#x27;</span><span class=\"string\"> + $iconfont_plus + &#x27;.eot&#x27;</span>);</span><br><span class=\"line\">  <span class=\"attribute\">src</span>: <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;//at.alicdn.com/t/c/font_&#x27;</span><span class=\"string\"> + $iconfont_plus + &#x27;.eot?#iefix&#x27;</span>) <span class=\"built_in\">format</span>(<span class=\"string\">&#x27;embedded-opentype&#x27;</span>),</span><br><span class=\"line\">  <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;//at.alicdn.com/t/c/font_&#x27;</span><span class=\"string\"> + $iconfont_plus + &#x27;.woff2&#x27;</span>) <span class=\"built_in\">format</span>(<span class=\"string\">&#x27;woff2&#x27;</span>),</span><br><span class=\"line\">  <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;//at.alicdn.com/t/c/font_&#x27;</span><span class=\"string\"> + $iconfont_plus + &#x27;.woff&#x27;</span>) <span class=\"built_in\">format</span>(<span class=\"string\">&#x27;woff&#x27;</span>),</span><br><span class=\"line\">  <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;//at.alicdn.com/t/c/font_&#x27;</span><span class=\"string\"> + $iconfont_plus + &#x27;.ttf&#x27;</span>) <span class=\"built_in\">format</span>(<span class=\"string\">&#x27;truetype&#x27;</span>),</span><br><span class=\"line\">  <span class=\"built_in\">url</span>(<span class=\"string\">&#x27;//at.alicdn.com/t/c/font_&#x27;</span><span class=\"string\"> + $iconfont_plus + &#x27;.svg#ic&#x27;</span>) <span class=\"built_in\">format</span>(<span class=\"string\">&#x27;svg&#x27;</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br />\n 注意，这一步中要检查你的 <code>iconfont</code>  项目在线链接是否和此处的匹配，若不匹配需要修改。</p>\n</li>\n</ol>\n<p>现在可以自由添加 icon 了，格式为： <code>&lt;i class=&quot;ic i-subway&quot;&gt; &lt;/i&gt;</code> 。</p>\n<p>我们只需要将新增的 icon 添加到自己的项目，然后更新一下在线链接，最后修改一下配置文件中 <code>iconfont_plus</code>  的内容。</p>\n<div class=\"note success\">\n<p>祝：食用愉快</p>\n</div>\n",
            "tags": [
                "Hexo",
                "shokaX",
                "博客主题",
                "Develop"
            ]
        }
    ]
}